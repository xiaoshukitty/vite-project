import{c as e,f as t,e as a,k as o,u as s,x as l,y as u,a as r,p as f,_ as i,w as v}from"./el-icon-tw-CEBic.js";import{C as n}from"./event-DkVV3hnh.js";import{t as p}from"./error-lyDbv7Kx.js";import{a as d}from"./index-Nmyz4ihQ.js";import{h as m,X as c,r as x,j as g,f as h,a as y,w as b,o as w,c as $,y as j,q as S,s as T,u as E,n as _}from"./index-qOT9rGls.js";const z=e({zIndex:{type:t([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),I={scroll:({scrollTop:e,fixed:t})=>a(e)&&o(t),[n]:e=>o(e)},k="ElAffix",q=m({name:k});const N=v(i(m({...q,props:z,emits:I,setup(e,{expose:t,emit:a}){const o=e,i=s("affix"),v=c(),n=c(),m=c(),{height:z}=l(),{height:I,width:q,top:N,bottom:A,update:C}=u(n,{windowScroll:!1}),R=u(v),W=x(!1),X=x(0),Y=x(0),B=g((()=>({height:W.value?`${I.value}px`:"",width:W.value?`${q.value}px`:""}))),D=g((()=>{if(!W.value)return{};const e=o.offset?r(o.offset):0;return{height:`${I.value}px`,width:`${q.value}px`,top:"top"===o.position?e:"",bottom:"bottom"===o.position?e:"",transform:Y.value?`translateY(${Y.value}px)`:"",zIndex:o.zIndex}})),F=()=>{if(m.value)if(X.value=m.value instanceof Window?document.documentElement.scrollTop:m.value.scrollTop||0,"top"===o.position)if(o.target){const e=R.bottom.value-o.offset-I.value;W.value=o.offset>N.value&&R.bottom.value>0,Y.value=e<0?e:0}else W.value=o.offset>N.value;else if(o.target){const e=z.value-R.top.value-o.offset-I.value;W.value=z.value-o.offset<A.value&&z.value>R.top.value,Y.value=e<0?-e:0}else W.value=z.value-o.offset<A.value};return h(W,(e=>a("change",e))),y((()=>{var e;o.target?(v.value=null!=(e=document.querySelector(o.target))?e:void 0,v.value||p(k,`Target is not existed: ${o.target}`)):v.value=document.documentElement,m.value=d(n.value,!0),C()})),f(m,"scroll",(()=>{C(),a("scroll",{scrollTop:X.value,fixed:W.value})})),b(F),t({update:F,updateRoot:C}),(e,t)=>(w(),$("div",{ref_key:"root",ref:n,class:T(E(i).b()),style:_(E(B))},[j("div",{class:T({[E(i).m("fixed")]:W.value}),style:_(E(D))},[S(e.$slots,"default")],6)],6))}}),[["__file","affix.vue"]]));export{N as E};
