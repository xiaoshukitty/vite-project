import{i as e,d as a,p as t,e as o,c as l,f as n,W as s,u as r,s as i,E as u,_ as p,w as d}from"./el-icon-xOR8YP1z.js";import{r as c,X as f,f as v,i as m,C as y,k as x,h as b,aJ as g,D as h,j as w,aK as S,aL as k,B as z,a as C,ak as I,I as F,H as E,o as B,c as j,A as $,Z as P,s as M,u as V,q as _,y as R,l as N,m as A,p as H,F as T,ay as O,t as W,M as K,N as L,z as D,n as q,au as J}from"./index-hdHR_QWJ.js";import{a as U}from"./use-global-config-P7ZeEJYb.js";import{i as X,a as Y,d as Z,b as G,c as Q,V as ee}from"./use-form-item-fM8EPulq.js";import{U as ae}from"./event-DkVV3hnh.js";import{u as te}from"./index-RhFZZ9Kp.js";import{d as oe}from"./error-lyDbv7Kx.js";import{a as le}from"./el-popper-O2S0kkIE.js";const ne=e=>["",...a].includes(e),se=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);let re;const ie=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${e&&/firefox/i.test(window.navigator.userAgent)?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,ue=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function pe(e,a=1,t){var l;re||(re=document.createElement("textarea"),document.body.appendChild(re));const{paddingSize:n,borderSize:s,boxSizing:r,contextStyle:i}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),o=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),l=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:ue.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:l,boxSizing:t}}(e);re.setAttribute("style",`${i};${ie}`),re.value=e.value||e.placeholder||"";let u=re.scrollHeight;const p={};"border-box"===r?u+=s:"content-box"===r&&(u-=n),re.value="";const d=re.scrollHeight-n;if(o(a)){let e=d*a;"border-box"===r&&(e=e+n+s),u=Math.max(e,u),p.minHeight=`${e}px`}if(o(t)){let e=d*t;"border-box"===r&&(e=e+n+s),u=Math.min(e,u)}return p.height=`${u}px`,null==(l=re.parentNode)||l.removeChild(re),re=void 0,p}const de=l({id:{type:String,default:void 0},size:U,disabled:Boolean,modelValue:{type:n([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:n([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:X},prefixIcon:{type:X},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:n([Object,Array,String]),default:()=>s({})},autofocus:{type:Boolean,default:!1}}),ce={[ae]:e=>x(e),input:e=>x(e),change:e=>x(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},fe=["role"],ve=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],me=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],ye=b({name:"ElInput",inheritAttrs:!1});const xe=d(p(b({...ye,props:de,emits:ce,setup(a,{expose:o,emit:l}){const n=a,s=g(),p=h(),d=w((()=>{const e={};return"combobox"===n.containerRole&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e})),x=w((()=>["textarea"===n.type?ce.b():de.b(),de.m(ie.value),de.is("disabled",ue.value),de.is("exceed",He.value),{[de.b("group")]:p.prepend||p.append,[de.bm("group","append")]:p.append,[de.bm("group","prepend")]:p.prepend,[de.m("prefix")]:p.prefix||n.prefixIcon,[de.m("suffix")]:p.suffix||n.suffixIcon||n.clearable||n.showPassword,[de.bm("suffix","password-clear")]:_e.value&&Re.value},s.class])),b=w((()=>[de.e("wrapper"),de.is("focus",Ce.value)])),U=te({excludeKeys:w((()=>Object.keys(d.value)))}),{form:X,formItem:ne}=Y(),{inputId:re}=Z(n,{formItemContext:ne}),ie=G(),ue=Q(),de=r("input"),ce=r("textarea"),ye=f(),xe=f(),be=c(!1),ge=c(!1),he=c(!1),we=c(),Se=f(n.inputStyle),ke=w((()=>ye.value||xe.value)),{wrapperRef:ze,isFocused:Ce,handleFocus:Ie,handleBlur:Fe}=function(e,{afterFocus:a,beforeBlur:o,afterBlur:l}={}){const n=y(),{emit:s}=n,r=f(),i=c(!1);return v(r,(e=>{e&&e.setAttribute("tabindex","-1")})),t(r,"click",(()=>{var a;null==(a=e.value)||a.focus()})),{wrapperRef:r,isFocused:i,handleFocus:e=>{i.value||(i.value=!0,s("focus",e),null==a||a())},handleBlur:e=>{var a;m(o)&&o(e)||e.relatedTarget&&(null==(a=r.value)?void 0:a.contains(e.relatedTarget))||(i.value=!1,s("blur",e),null==l||l())}}}(ke,{afterBlur(){var e;n.validateEvent&&(null==(e=null==ne?void 0:ne.validate)||e.call(ne,"blur").catch((e=>oe())))}}),Ee=w((()=>{var e;return null!=(e=null==X?void 0:X.statusIcon)&&e})),Be=w((()=>(null==ne?void 0:ne.validateState)||"")),je=w((()=>Be.value&&ee[Be.value])),$e=w((()=>he.value?S:k)),Pe=w((()=>[s.style,n.inputStyle])),Me=w((()=>[n.inputStyle,Se.value,{resize:n.resize}])),Ve=w((()=>le(n.modelValue)?"":String(n.modelValue))),_e=w((()=>n.clearable&&!ue.value&&!n.readonly&&!!Ve.value&&(Ce.value||be.value))),Re=w((()=>n.showPassword&&!ue.value&&!n.readonly&&!!Ve.value&&(!!Ve.value||Ce.value))),Ne=w((()=>n.showWordLimit&&!!U.value.maxlength&&("text"===n.type||"textarea"===n.type)&&!ue.value&&!n.readonly&&!n.showPassword)),Ae=w((()=>Ve.value.length)),He=w((()=>!!Ne.value&&Ae.value>Number(U.value.maxlength))),Te=w((()=>!!p.suffix||!!n.suffixIcon||_e.value||n.showPassword||Ne.value||!!Be.value&&Ee.value)),[Oe,We]=function(e){const a=c();return[function(){if(null==e.value)return;const{selectionStart:t,selectionEnd:o,value:l}=e.value;if(null==t||null==o)return;const n=l.slice(0,Math.max(0,t)),s=l.slice(Math.max(0,o));a.value={selectionStart:t,selectionEnd:o,value:l,beforeTxt:n,afterTxt:s}},function(){if(null==e.value||null==a.value)return;const{value:t}=e.value,{beforeTxt:o,afterTxt:l,selectionStart:n}=a.value;if(null==o||null==l||null==n)return;let s=t.length;if(t.endsWith(l))s=t.length-l.length;else if(t.startsWith(o))s=o.length;else{const e=o[n-1],a=t.indexOf(e,n-1);-1!==a&&(s=a+1)}e.value.setSelectionRange(s,s)}]}(ye);i(xe,(e=>{if(Le(),!Ne.value||"both"!==n.resize)return;const a=e[0],{width:t}=a.contentRect;we.value={right:`calc(100% - ${t+15+6}px)`}}));const Ke=()=>{const{type:a,autosize:t}=n;if(e&&"textarea"===a&&xe.value)if(t){const e=J(t)?t.minRows:void 0,a=J(t)?t.maxRows:void 0,o=pe(xe.value,e,a);Se.value={overflowY:"hidden",...o},z((()=>{xe.value.offsetHeight,Se.value=o}))}else Se.value={minHeight:pe(xe.value).minHeight}},Le=(e=>{let a=!1;return()=>{var t;if(a||!n.autosize)return;null===(null==(t=xe.value)?void 0:t.offsetParent)||(e(),a=!0)}})(Ke),De=()=>{const e=ke.value,a=n.formatter?n.formatter(Ve.value):Ve.value;e&&e.value!==a&&(e.value=a)},qe=async e=>{Oe();let{value:a}=e.target;n.formatter&&(a=n.parser?n.parser(a):a),ge.value||(a!==Ve.value?(l(ae,a),l("input",a),await z(),De(),We()):De())},Je=e=>{l("change",e.target.value)},Ue=e=>{l("compositionstart",e),ge.value=!0},Xe=e=>{var a;l("compositionupdate",e);const t=null==(a=e.target)?void 0:a.value,o=t[t.length-1]||"";ge.value=!se(o)},Ye=e=>{l("compositionend",e),ge.value&&(ge.value=!1,qe(e))},Ze=()=>{he.value=!he.value,Ge()},Ge=async()=>{var e;await z(),null==(e=ke.value)||e.focus()},Qe=e=>{be.value=!1,l("mouseleave",e)},ea=e=>{be.value=!0,l("mouseenter",e)},aa=e=>{l("keydown",e)},ta=()=>{l(ae,""),l("change",""),l("clear"),l("input","")};return v((()=>n.modelValue),(()=>{var e;z((()=>Ke())),n.validateEvent&&(null==(e=null==ne?void 0:ne.validate)||e.call(ne,"change").catch((e=>oe())))})),v(Ve,(()=>De())),v((()=>n.type),(async()=>{await z(),De(),Ke()})),C((()=>{!n.formatter&&n.parser,De(),z(Ke)})),o({input:ye,textarea:xe,ref:ke,textareaStyle:Me,autosize:I(n,"autosize"),focus:Ge,blur:()=>{var e;return null==(e=ke.value)?void 0:e.blur()},select:()=>{var e;null==(e=ke.value)||e.select()},clear:ta,resizeTextarea:Ke}),(e,a)=>F((B(),j("div",T(V(d),{class:V(x),style:V(Pe),role:e.containerRole,onMouseenter:ea,onMouseleave:Qe}),[$(" input "),"textarea"!==e.type?(B(),j(P,{key:0},[$(" prepend slot "),e.$slots.prepend?(B(),j("div",{key:0,class:M(V(de).be("group","prepend"))},[_(e.$slots,"prepend")],2)):$("v-if",!0),R("div",{ref_key:"wrapperRef",ref:ze,class:M(V(b))},[$(" prefix slot "),e.$slots.prefix||e.prefixIcon?(B(),j("span",{key:0,class:M(V(de).e("prefix"))},[R("span",{class:M(V(de).e("prefix-inner"))},[_(e.$slots,"prefix"),e.prefixIcon?(B(),N(V(u),{key:0,class:M(V(de).e("icon"))},{default:A((()=>[(B(),N(H(e.prefixIcon)))])),_:1},8,["class"])):$("v-if",!0)],2)],2)):$("v-if",!0),R("input",T({id:V(re),ref_key:"input",ref:ye,class:V(de).e("inner")},V(U),{type:e.showPassword?he.value?"text":"password":e.type,disabled:V(ue),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:n.form,autofocus:n.autofocus,onCompositionstart:Ue,onCompositionupdate:Xe,onCompositionend:Ye,onInput:qe,onFocus:a[0]||(a[0]=(...e)=>V(Ie)&&V(Ie)(...e)),onBlur:a[1]||(a[1]=(...e)=>V(Fe)&&V(Fe)(...e)),onChange:Je,onKeydown:aa}),null,16,ve),$(" suffix slot "),V(Te)?(B(),j("span",{key:1,class:M(V(de).e("suffix"))},[R("span",{class:M(V(de).e("suffix-inner"))},[V(_e)&&V(Re)&&V(Ne)?$("v-if",!0):(B(),j(P,{key:0},[_(e.$slots,"suffix"),e.suffixIcon?(B(),N(V(u),{key:0,class:M(V(de).e("icon"))},{default:A((()=>[(B(),N(H(e.suffixIcon)))])),_:1},8,["class"])):$("v-if",!0)],64)),V(_e)?(B(),N(V(u),{key:1,class:M([V(de).e("icon"),V(de).e("clear")]),onMousedown:K(V(L),["prevent"]),onClick:ta},{default:A((()=>[W(V(O))])),_:1},8,["class","onMousedown"])):$("v-if",!0),V(Re)?(B(),N(V(u),{key:2,class:M([V(de).e("icon"),V(de).e("password")]),onClick:Ze},{default:A((()=>[(B(),N(H(V($e))))])),_:1},8,["class"])):$("v-if",!0),V(Ne)?(B(),j("span",{key:3,class:M(V(de).e("count"))},[R("span",{class:M(V(de).e("count-inner"))},D(V(Ae))+" / "+D(V(U).maxlength),3)],2)):$("v-if",!0),V(Be)&&V(je)&&V(Ee)?(B(),N(V(u),{key:4,class:M([V(de).e("icon"),V(de).e("validateIcon"),V(de).is("loading","validating"===V(Be))])},{default:A((()=>[(B(),N(H(V(je))))])),_:1},8,["class"])):$("v-if",!0)],2)],2)):$("v-if",!0)],2),$(" append slot "),e.$slots.append?(B(),j("div",{key:1,class:M(V(de).be("group","append"))},[_(e.$slots,"append")],2)):$("v-if",!0)],64)):(B(),j(P,{key:1},[$(" textarea "),R("textarea",T({id:V(re),ref_key:"textarea",ref:xe,class:V(ce).e("inner")},V(U),{tabindex:e.tabindex,disabled:V(ue),readonly:e.readonly,autocomplete:e.autocomplete,style:V(Me),"aria-label":e.label,placeholder:e.placeholder,form:n.form,autofocus:n.autofocus,onCompositionstart:Ue,onCompositionupdate:Xe,onCompositionend:Ye,onInput:qe,onFocus:a[2]||(a[2]=(...e)=>V(Ie)&&V(Ie)(...e)),onBlur:a[3]||(a[3]=(...e)=>V(Fe)&&V(Fe)(...e)),onChange:Je,onKeydown:aa}),null,16,me),V(Ne)?(B(),j("span",{key:0,style:q(we.value),class:M(V(de).e("count"))},D(V(Ae))+" / "+D(V(U).maxlength),7)):$("v-if",!0)],64))],16,fe)),[[E,"hidden"!==e.type]])}}),[["__file","input.vue"]]));export{xe as E,se as a,ne as i};
