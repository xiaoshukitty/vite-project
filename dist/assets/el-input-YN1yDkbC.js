import{c as e,a}from"./use-global-config-CwZlgeMO.js";import{r as t,X as o,f as l,i as n,C as s,k as r,h as i,aG as u,D as p,j as d,aH as c,aI as f,B as v,a as m,aJ as y,I as x,H as b,o as g,c as h,A as w,Z as S,s as k,u as z,q as I,y as C,l as F,m as E,p as B,F as j,av as $,t as P,M,N as V,z as _,n as R,ar as N}from"./index-qsd7PtRw.js";import{i as A,o as H,d as T,c as O,e as W,U as K,u as q,q as D,E as L,_ as U,w as G}from"./el-icon-lLev9OLe.js";import{i as J,a as X,d as Y,b as Z,c as Q,V as ee}from"./use-form-item--ao8u_XJ.js";import{U as ae}from"./event-DkVV3hnh.js";import{u as te}from"./index-DNCEDO81.js";import{d as oe}from"./error-lyDbv7Kx.js";import{a as le}from"./el-popper-5sk2KZRR.js";const ne=a=>["",...e].includes(a),se=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);let re;const ie=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${A&&/firefox/i.test(window.navigator.userAgent)?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,ue=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function pe(e,a=1,t){var o;re||(re=document.createElement("textarea"),document.body.appendChild(re));const{paddingSize:l,borderSize:n,boxSizing:s,contextStyle:r}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),o=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),l=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:ue.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:l,boxSizing:t}}(e);re.setAttribute("style",`${r};${ie}`),re.value=e.value||e.placeholder||"";let i=re.scrollHeight;const u={};"border-box"===s?i+=n:"content-box"===s&&(i-=l),re.value="";const p=re.scrollHeight-l;if(T(a)){let e=p*a;"border-box"===s&&(e=e+l+n),i=Math.max(e,i),u.minHeight=`${e}px`}if(T(t)){let e=p*t;"border-box"===s&&(e=e+l+n),i=Math.min(e,i)}return u.height=`${i}px`,null==(o=re.parentNode)||o.removeChild(re),re=void 0,u}const de=O({id:{type:String,default:void 0},size:a,disabled:Boolean,modelValue:{type:W([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:W([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:J},prefixIcon:{type:J},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:W([Object,Array,String]),default:()=>K({})},autofocus:{type:Boolean,default:!1}}),ce={[ae]:e=>r(e),input:e=>r(e),change:e=>r(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},fe=["role"],ve=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],me=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],ye=i({name:"ElInput",inheritAttrs:!1});const xe=G(U(i({...ye,props:de,emits:ce,setup(e,{expose:a,emit:r}){const i=e,T=u(),O=p(),W=d((()=>{const e={};return"combobox"===i.containerRole&&(e["aria-haspopup"]=T["aria-haspopup"],e["aria-owns"]=T["aria-owns"],e["aria-expanded"]=T["aria-expanded"]),e})),K=d((()=>["textarea"===i.type?ce.b():de.b(),de.m(ie.value),de.is("disabled",ue.value),de.is("exceed",He.value),{[de.b("group")]:O.prepend||O.append,[de.bm("group","append")]:O.append,[de.bm("group","prepend")]:O.prepend,[de.m("prefix")]:O.prefix||i.prefixIcon,[de.m("suffix")]:O.suffix||i.suffixIcon||i.clearable||i.showPassword,[de.bm("suffix","password-clear")]:_e.value&&Re.value},T.class])),U=d((()=>[de.e("wrapper"),de.is("focus",Ie.value)])),G=te({excludeKeys:d((()=>Object.keys(W.value)))}),{form:J,formItem:ne}=X(),{inputId:re}=Y(i,{formItemContext:ne}),ie=Z(),ue=Q(),de=q("input"),ce=q("textarea"),ye=o(),xe=o(),be=t(!1),ge=t(!1),he=t(!1),we=t(),Se=o(i.inputStyle),ke=d((()=>ye.value||xe.value)),{wrapperRef:ze,isFocused:Ie,handleFocus:Ce,handleBlur:Fe}=function(e,{afterFocus:a,beforeBlur:r,afterBlur:i}={}){const u=s(),{emit:p}=u,d=o(),c=t(!1);return l(d,(e=>{e&&e.setAttribute("tabindex","-1")})),H(d,"click",(()=>{var a;null==(a=e.value)||a.focus()})),{wrapperRef:d,isFocused:c,handleFocus:e=>{c.value||(c.value=!0,p("focus",e),null==a||a())},handleBlur:e=>{var a;n(r)&&r(e)||e.relatedTarget&&(null==(a=d.value)?void 0:a.contains(e.relatedTarget))||(c.value=!1,p("blur",e),null==i||i())}}}(ke,{afterBlur(){var e;i.validateEvent&&(null==(e=null==ne?void 0:ne.validate)||e.call(ne,"blur").catch((e=>oe())))}}),Ee=d((()=>{var e;return null!=(e=null==J?void 0:J.statusIcon)&&e})),Be=d((()=>(null==ne?void 0:ne.validateState)||"")),je=d((()=>Be.value&&ee[Be.value])),$e=d((()=>he.value?c:f)),Pe=d((()=>[T.style,i.inputStyle])),Me=d((()=>[i.inputStyle,Se.value,{resize:i.resize}])),Ve=d((()=>le(i.modelValue)?"":String(i.modelValue))),_e=d((()=>i.clearable&&!ue.value&&!i.readonly&&!!Ve.value&&(Ie.value||be.value))),Re=d((()=>i.showPassword&&!ue.value&&!i.readonly&&!!Ve.value&&(!!Ve.value||Ie.value))),Ne=d((()=>i.showWordLimit&&!!G.value.maxlength&&("text"===i.type||"textarea"===i.type)&&!ue.value&&!i.readonly&&!i.showPassword)),Ae=d((()=>Ve.value.length)),He=d((()=>!!Ne.value&&Ae.value>Number(G.value.maxlength))),Te=d((()=>!!O.suffix||!!i.suffixIcon||_e.value||i.showPassword||Ne.value||!!Be.value&&Ee.value)),[Oe,We]=function(e){const a=t();return[function(){if(null==e.value)return;const{selectionStart:t,selectionEnd:o,value:l}=e.value;if(null==t||null==o)return;const n=l.slice(0,Math.max(0,t)),s=l.slice(Math.max(0,o));a.value={selectionStart:t,selectionEnd:o,value:l,beforeTxt:n,afterTxt:s}},function(){if(null==e.value||null==a.value)return;const{value:t}=e.value,{beforeTxt:o,afterTxt:l,selectionStart:n}=a.value;if(null==o||null==l||null==n)return;let s=t.length;if(t.endsWith(l))s=t.length-l.length;else if(t.startsWith(o))s=o.length;else{const e=o[n-1],a=t.indexOf(e,n-1);-1!==a&&(s=a+1)}e.value.setSelectionRange(s,s)}]}(ye);D(xe,(e=>{if(qe(),!Ne.value||"both"!==i.resize)return;const a=e[0],{width:t}=a.contentRect;we.value={right:`calc(100% - ${t+15+6}px)`}}));const Ke=()=>{const{type:e,autosize:a}=i;if(A&&"textarea"===e&&xe.value)if(a){const e=N(a)?a.minRows:void 0,t=N(a)?a.maxRows:void 0,o=pe(xe.value,e,t);Se.value={overflowY:"hidden",...o},v((()=>{xe.value.offsetHeight,Se.value=o}))}else Se.value={minHeight:pe(xe.value).minHeight}},qe=(e=>{let a=!1;return()=>{var t;if(a||!i.autosize)return;null===(null==(t=xe.value)?void 0:t.offsetParent)||(e(),a=!0)}})(Ke),De=()=>{const e=ke.value,a=i.formatter?i.formatter(Ve.value):Ve.value;e&&e.value!==a&&(e.value=a)},Le=async e=>{Oe();let{value:a}=e.target;i.formatter&&(a=i.parser?i.parser(a):a),ge.value||(a!==Ve.value?(r(ae,a),r("input",a),await v(),De(),We()):De())},Ue=e=>{r("change",e.target.value)},Ge=e=>{r("compositionstart",e),ge.value=!0},Je=e=>{var a;r("compositionupdate",e);const t=null==(a=e.target)?void 0:a.value,o=t[t.length-1]||"";ge.value=!se(o)},Xe=e=>{r("compositionend",e),ge.value&&(ge.value=!1,Le(e))},Ye=()=>{he.value=!he.value,Ze()},Ze=async()=>{var e;await v(),null==(e=ke.value)||e.focus()},Qe=e=>{be.value=!1,r("mouseleave",e)},ea=e=>{be.value=!0,r("mouseenter",e)},aa=e=>{r("keydown",e)},ta=()=>{r(ae,""),r("change",""),r("clear"),r("input","")};return l((()=>i.modelValue),(()=>{var e;v((()=>Ke())),i.validateEvent&&(null==(e=null==ne?void 0:ne.validate)||e.call(ne,"change").catch((e=>oe())))})),l(Ve,(()=>De())),l((()=>i.type),(async()=>{await v(),De(),Ke()})),m((()=>{!i.formatter&&i.parser,De(),v(Ke)})),a({input:ye,textarea:xe,ref:ke,textareaStyle:Me,autosize:y(i,"autosize"),focus:Ze,blur:()=>{var e;return null==(e=ke.value)?void 0:e.blur()},select:()=>{var e;null==(e=ke.value)||e.select()},clear:ta,resizeTextarea:Ke}),(e,a)=>x((g(),h("div",j(z(W),{class:z(K),style:z(Pe),role:e.containerRole,onMouseenter:ea,onMouseleave:Qe}),[w(" input "),"textarea"!==e.type?(g(),h(S,{key:0},[w(" prepend slot "),e.$slots.prepend?(g(),h("div",{key:0,class:k(z(de).be("group","prepend"))},[I(e.$slots,"prepend")],2)):w("v-if",!0),C("div",{ref_key:"wrapperRef",ref:ze,class:k(z(U))},[w(" prefix slot "),e.$slots.prefix||e.prefixIcon?(g(),h("span",{key:0,class:k(z(de).e("prefix"))},[C("span",{class:k(z(de).e("prefix-inner"))},[I(e.$slots,"prefix"),e.prefixIcon?(g(),F(z(L),{key:0,class:k(z(de).e("icon"))},{default:E((()=>[(g(),F(B(e.prefixIcon)))])),_:1},8,["class"])):w("v-if",!0)],2)],2)):w("v-if",!0),C("input",j({id:z(re),ref_key:"input",ref:ye,class:z(de).e("inner")},z(G),{type:e.showPassword?he.value?"text":"password":e.type,disabled:z(ue),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:i.form,autofocus:i.autofocus,onCompositionstart:Ge,onCompositionupdate:Je,onCompositionend:Xe,onInput:Le,onFocus:a[0]||(a[0]=(...e)=>z(Ce)&&z(Ce)(...e)),onBlur:a[1]||(a[1]=(...e)=>z(Fe)&&z(Fe)(...e)),onChange:Ue,onKeydown:aa}),null,16,ve),w(" suffix slot "),z(Te)?(g(),h("span",{key:1,class:k(z(de).e("suffix"))},[C("span",{class:k(z(de).e("suffix-inner"))},[z(_e)&&z(Re)&&z(Ne)?w("v-if",!0):(g(),h(S,{key:0},[I(e.$slots,"suffix"),e.suffixIcon?(g(),F(z(L),{key:0,class:k(z(de).e("icon"))},{default:E((()=>[(g(),F(B(e.suffixIcon)))])),_:1},8,["class"])):w("v-if",!0)],64)),z(_e)?(g(),F(z(L),{key:1,class:k([z(de).e("icon"),z(de).e("clear")]),onMousedown:M(z(V),["prevent"]),onClick:ta},{default:E((()=>[P(z($))])),_:1},8,["class","onMousedown"])):w("v-if",!0),z(Re)?(g(),F(z(L),{key:2,class:k([z(de).e("icon"),z(de).e("password")]),onClick:Ye},{default:E((()=>[(g(),F(B(z($e))))])),_:1},8,["class"])):w("v-if",!0),z(Ne)?(g(),h("span",{key:3,class:k(z(de).e("count"))},[C("span",{class:k(z(de).e("count-inner"))},_(z(Ae))+" / "+_(z(G).maxlength),3)],2)):w("v-if",!0),z(Be)&&z(je)&&z(Ee)?(g(),F(z(L),{key:4,class:k([z(de).e("icon"),z(de).e("validateIcon"),z(de).is("loading","validating"===z(Be))])},{default:E((()=>[(g(),F(B(z(je))))])),_:1},8,["class"])):w("v-if",!0)],2)],2)):w("v-if",!0)],2),w(" append slot "),e.$slots.append?(g(),h("div",{key:1,class:k(z(de).be("group","append"))},[I(e.$slots,"append")],2)):w("v-if",!0)],64)):(g(),h(S,{key:1},[w(" textarea "),C("textarea",j({id:z(re),ref_key:"textarea",ref:xe,class:z(ce).e("inner")},z(G),{tabindex:e.tabindex,disabled:z(ue),readonly:e.readonly,autocomplete:e.autocomplete,style:z(Me),"aria-label":e.label,placeholder:e.placeholder,form:i.form,autofocus:i.autofocus,onCompositionstart:Ge,onCompositionupdate:Je,onCompositionend:Xe,onInput:Le,onFocus:a[2]||(a[2]=(...e)=>z(Ce)&&z(Ce)(...e)),onBlur:a[3]||(a[3]=(...e)=>z(Fe)&&z(Fe)(...e)),onChange:Ue,onKeydown:aa}),null,16,me),z(Ne)?(g(),h("span",{key:0,style:R(we.value),class:k(z(de).e("count"))},_(z(Ae))+" / "+_(z(G).maxlength),7)):w("v-if",!0)],64))],16,fe)),[[b,"hidden"!==e.type]])}}),[["__file","input.vue"]]));export{xe as E,se as a,ne as i};
