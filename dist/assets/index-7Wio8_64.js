import{E as a}from"./el-icon-ocecJSUK.js";import{a as l,E as s}from"./el-tab-pane-pmvHpuvP.js";import{E as e}from"./el-button-NMxFg6HV.js";import{E as i,a as n}from"./el-col-8Hh9WNPK.js";import{f as t,a5 as o,a9 as u,aa as d,r as c,R as r,l as v,j as m,aK as p,o as f,c as _,A as g,H as y,C as b,aB as h,y as k,aL as j,aM as x,aN as z,F as C,a2 as M,B as S,J as D,I as E,aO as V,q,x as w,_ as I,a6 as R,aP as $,Y as B,aQ as L,aR as N}from"./index-kEhwcNgq.js";import{c as P}from"./index-QaqJSRPH.js";import"./index-J_tnFMpv.js";import"./event-DkVV3hnh.js";import"./index-mAjFbUnQ.js";import"./use-form-item-uTcPEy9o.js";const A={class:"son_btn fs14"},F={class:"song_list"},H={class:"df"},J={class:"music_mv"},K={key:0,style:{display:"flex","margin-left":"5px"}},O={style:{display:"flex","align-items":"center"}},Q={key:0,class:"loading_btn"},T=I(t({__name:"Song",props:{id:{}},setup(l){const s=o(),t=l,{id:I}=u(d()),{playMusic:R,pushPlayList:$}=d(),B=c([]),L=r({order:"hot",limit:20,page:1,loading:!1,noMore:!1});v((async()=>{await T()}));const N=m((()=>1===L.page?0:B.value.length+L.limit)),T=async()=>{try{L.loading=!0;const{songs:a}=await p(t.id,L.order,L.limit,N.value);1===L.page?B.value=a:B.value.push(...a),a.length<L.limit&&(L.noMore=!0)}catch(a){L.page--}L.loading=!1},U=()=>{L.page++,T()},Y=()=>{$(!1,...B.value),R(B.value[0].id)};return(l,t)=>{const o=e,u=i,d=n,c=a;return f(),_(C,null,[g("div",A,[y(o,{plain:"",round:"",icon:k(j),onClick:Y},{default:b((()=>[h("播放全部")])),_:1},8,["icon"]),y(o,{plain:"",round:"",icon:k(x)},{default:b((()=>[h("下载")])),_:1},8,["icon"]),y(o,{plain:"",round:"",icon:k(z)},{default:b((()=>[h("批量操作")])),_:1},8,["icon"])]),y(d,{class:"fs14 mt20"},{default:b((()=>[y(u,{span:14},{default:b((()=>[h("歌曲")])),_:1}),y(u,{span:8},{default:b((()=>[h("专辑")])),_:1}),y(u,{span:2},{default:b((()=>[h("时长")])),_:1})])),_:1}),g("div",F,[(f(!0),_(C,null,M(B.value,((a,l)=>(f(),S(d,{class:w(["h50 song_info",{playing:k(I)===a.id}]),key:l,onDblclick:l=>k(R)(a.id)},{default:b((()=>[y(u,{class:"music_song lh50",span:14},{default:b((()=>[g("div",H,[g("div",J,[g("div",null,D(a.name),1),a.mv>0?(f(),_("div",K,[y(c,{class:"mv_hover",size:20,color:"#000",onClick:E((l=>{return e="mvDetail",i=a.mv,void s.push({path:e,query:{id:i}});var e,i}),["stop"])},{default:b((()=>[y(k(V))])),_:2},1032,["onClick"])])):q("",!0)]),g("div",O,[y(c,{class:"icon",size:20,color:"#fff",onClick:E((l=>k(R)(a.id)),["stop"])},{default:b((()=>[y(k(j))])),_:2},1032,["onClick"])])])])),_:2},1024),y(u,{class:"collection lh50",span:8},{default:b((()=>[h(D(a.al.name),1)])),_:2},1024),y(u,{class:"duration lh50",span:2},{default:b((()=>[h(D(k(P)(a.dt/1e3)),1)])),_:2},1024)])),_:2},1032,["onDblclick","class"])))),128))]),B.value.length>0&&!L.noMore?(f(),_("div",Q,[y(o,{type:"success",loading:L.loading,link:"",onClick:U},{default:b((()=>[h("加载更多")])),_:1},8,["loading"])])):q("",!0)],64)}}}),[["__scopeId","data-v-7d24a4f5"]]),U={key:0,class:"details_top"},Y=["src"],G={class:"details_right"},W={class:"details_name"},X={class:"details_info fs12"},Z={class:"details_song fs12"},aa={style:{margin:"0 15px"}},la={class:"details_btn"},sa=I(t({__name:"index",setup(a){const i=R(),n=Number(i.query.id),t=c(),o=c(!1),u=c("song");return v((async()=>{t.value=await $(n),o.value=!0})),(a,i)=>{var d,c,r,v,m,p;const j=e,x=s,z=l;return f(),_(C,null,[o.value?(f(),_("div",U,[g("img",{src:null==(d=t.value)?void 0:d.artist.cover,alt:""},null,8,Y),g("div",G,[g("div",W,D(null==(c=t.value)?void 0:c.artist.name),1),g("div",X,D(null==(r=t.value)?void 0:r.artist.briefDesc.substring(0,90))+"...",1),g("div",Z,[g("span",null,"单曲数："+D(null==(v=t.value)?void 0:v.artist.musicSize),1),g("span",aa,"专辑数："+D(null==(m=t.value)?void 0:m.artist.albumSize),1),g("span",null,"MV数："+D(null==(p=t.value)?void 0:p.artist.mvSize),1)]),g("div",la,[y(j,{type:"success",icon:k(B),round:""},{default:b((()=>[h("关注")])),_:1},8,["icon"]),y(j,{icon:k(L),round:""},{default:b((()=>[h("歌手电台")])),_:1},8,["icon"]),y(j,{icon:k(N),circle:""},null,8,["icon"])])])])):q("",!0),o.value?(f(),S(z,{key:1,modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value=a),class:"demo-tabs"},{default:b((()=>{var a,l,s;return[y(x,{label:`歌曲 ${null==(a=t.value)?void 0:a.artist.musicSize}`,name:"song"},{default:b((()=>[y(T,{id:k(n)},null,8,["id"])])),_:1},8,["label"]),y(x,{label:`专辑 ${null==(l=t.value)?void 0:l.artist.albumSize}`,name:"collection"},{default:b((()=>[h("Config")])),_:1},8,["label"]),y(x,{label:`视频 ${null==(s=t.value)?void 0:s.artist.musicSize}`,name:"M"},{default:b((()=>[h("Role")])),_:1},8,["label"]),y(x,{label:"详情",name:"songDetails"},{default:b((()=>[h("Task")])),_:1})]})),_:1},8,["modelValue"])):q("",!0)],64)}}}),[["__scopeId","data-v-13673dfc"]]);export{sa as default};
