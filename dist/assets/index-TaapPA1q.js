import{E as a}from"./el-icon-tZlRiTVF.js";import{a as l,E as s}from"./el-tab-pane-9QlVIxlf.js";import{E as e}from"./el-button-U1CizDvg.js";import{E as i,a as n}from"./el-col-cxEQ3a8C.js";import{k as t,a8 as o,ac as d,ad as u,r as c,X as r,a as v,m,aL as p,o as f,c as _,C as g,J as y,E as b,ah as h,A as k,aM as j,aN as x,aO as z,F as C,a5 as S,D,L as M,K as E,aP as V,y as q,z as w,_ as L,a9 as $,aQ as I,a2 as N,aR as P,aS as R}from"./index-T_AfnbBV.js";import{c as A}from"./index-J504GgKA.js";import"./index-o-rd57mM.js";import"./event-DkVV3hnh.js";import"./index-Cv0rBiCf.js";import"./vnode-sZ0dFU9Z.js";const F={class:"son_btn fs14"},J={class:"song_list"},K={class:"df"},O={class:"music_mv"},Q={key:0,style:{display:"flex","margin-left":"5px"}},T={style:{display:"flex","align-items":"center"}},U={key:0,class:"loading_btn"},X=L(t({__name:"Song",props:{id:{}},setup(l){const s=o(),t=l,{id:L,lyricData:$}=d(u()),{playMusic:I,pushPlayList:N}=u(),P=c([]),R=r({order:"hot",limit:20,page:1,loading:!1,noMore:!1});v((async()=>{await B()}));const X=m((()=>1===R.page?0:P.value.length+R.limit)),B=async()=>{try{R.loading=!0;const{songs:a}=await p(t.id,R.order,R.limit,X.value);1===R.page?P.value=a:P.value.push(...a),a.length<R.limit&&(R.noMore=!0)}catch(a){R.page--}R.loading=!1},G=()=>{R.page++,B()},H=()=>{N(!1,...P.value),I(P.value[0].id)};return(l,t)=>{const o=e,d=i,u=n,c=a;return f(),_(C,null,[g("div",F,[y(o,{plain:"",round:"",icon:k(j),onClick:H},{default:b((()=>[h("播放全部")])),_:1},8,["icon"]),y(o,{plain:"",round:"",icon:k(x)},{default:b((()=>[h("下载")])),_:1},8,["icon"]),y(o,{plain:"",round:"",icon:k(z)},{default:b((()=>[h("批量操作")])),_:1},8,["icon"])]),y(u,{class:"fs14 mt20"},{default:b((()=>[y(d,{span:14},{default:b((()=>[h("歌曲")])),_:1}),y(d,{span:8},{default:b((()=>[h("专辑")])),_:1}),y(d,{span:2},{default:b((()=>[h("时长")])),_:1})])),_:1}),g("div",J,[(f(!0),_(C,null,S(P.value,((a,l)=>(f(),D(u,{class:w(["h50 song_info",{playing:k(L)===a.id}]),key:l,onDblclick:l=>k(I)(a.id)},{default:b((()=>[y(d,{class:"music_song lh50",span:14},{default:b((()=>[g("div",K,[g("div",O,[g("div",null,M(a.name),1),a.mv>0?(f(),_("div",Q,[y(c,{class:"mv_hover",size:20,color:"#000",onClick:E((l=>{return e="mvDetail",i=a.mv,void s.push({path:e,query:{id:i}});var e,i}),["stop"])},{default:b((()=>[y(k(V))])),_:2},1032,["onClick"])])):q("",!0)]),g("div",T,[y(c,{class:"icon",size:20,color:"#fff",onClick:E((l=>k(I)(a.id)),["stop"])},{default:b((()=>[y(k(j))])),_:2},1032,["onClick"])])])])),_:2},1024),y(d,{class:"collection lh50",span:8},{default:b((()=>[h(M(a.al.name),1)])),_:2},1024),y(d,{class:"duration lh50",span:2},{default:b((()=>[h(M(k(A)(a.dt/1e3)),1)])),_:2},1024)])),_:2},1032,["onDblclick","class"])))),128))]),P.value.length>0&&!R.noMore?(f(),_("div",U,[y(o,{type:"success",loading:R.loading,link:"",onClick:G},{default:b((()=>[h("加载更多")])),_:1},8,["loading"])])):q("",!0)],64)}}}),[["__scopeId","data-v-ede4136d"]]),B={key:0,class:"details_top"},G=["src"],H={class:"details_right"},W={class:"details_name"},Y={class:"details_info fs12"},Z={class:"details_song fs12"},aa={style:{margin:"0 15px"}},la={class:"details_btn"},sa=L(t({__name:"index",setup(a){const i=$(),n=Number(i.query.id),t=c(),o=c(!1),d=c("song");return v((async()=>{t.value=await I(n),o.value=!0})),(a,i)=>{var u,c,r,v,m,p;const j=e,x=s,z=l;return f(),_(C,null,[o.value?(f(),_("div",B,[g("img",{src:null==(u=t.value)?void 0:u.artist.cover,alt:""},null,8,G),g("div",H,[g("div",W,M(null==(c=t.value)?void 0:c.artist.name),1),g("div",Y,M(null==(r=t.value)?void 0:r.artist.briefDesc.substring(0,90))+"...",1),g("div",Z,[g("span",null,"单曲数："+M(null==(v=t.value)?void 0:v.artist.musicSize),1),g("span",aa,"专辑数："+M(null==(m=t.value)?void 0:m.artist.albumSize),1),g("span",null,"MV数："+M(null==(p=t.value)?void 0:p.artist.mvSize),1)]),g("div",la,[y(j,{type:"success",icon:k(N),round:""},{default:b((()=>[h("关注")])),_:1},8,["icon"]),y(j,{icon:k(P),round:""},{default:b((()=>[h("歌手电台")])),_:1},8,["icon"]),y(j,{icon:k(R),circle:""},null,8,["icon"])])])])):q("",!0),o.value?(f(),D(z,{key:1,modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=a=>d.value=a),class:"demo-tabs"},{default:b((()=>{var a,l,s;return[y(x,{label:`歌曲 ${null==(a=t.value)?void 0:a.artist.musicSize}`,name:"song"},{default:b((()=>[y(X,{id:k(n)},null,8,["id"])])),_:1},8,["label"]),y(x,{label:`专辑 ${null==(l=t.value)?void 0:l.artist.albumSize}`,name:"collection"},{default:b((()=>[h("Config")])),_:1},8,["label"]),y(x,{label:`视频 ${null==(s=t.value)?void 0:s.artist.musicSize}`,name:"M"},{default:b((()=>[h("Role")])),_:1},8,["label"]),y(x,{label:"详情",name:"songDetails"},{default:b((()=>[h("Task")])),_:1})]})),_:1},8,["modelValue"])):q("",!0)],64)}}}),[["__scopeId","data-v-13673dfc"]]);export{sa as default};
