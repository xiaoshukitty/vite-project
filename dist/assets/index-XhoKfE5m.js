import{E as a}from"./el-icon-fEaut0vo.js";import{a as l,E as s}from"./el-tab-pane-bTRGtLlf.js";import{E as e}from"./el-button-CqO7S_iv.js";import{E as i,a as n}from"./el-col-Bn_w6a7t.js";import{f as t,a9 as o,aa as d,r as u,R as c,l as r,j as v,aK as m,o as p,c as f,A as _,H as g,C as b,aB as y,y as k,aL as h,aM as j,aN as x,F as z,a2 as C,B as M,J as S,I as D,aO as E,x as V,q as w,_ as I,a6 as R,aP as $,Y as q,aQ as B,aR as L}from"./index-YIGbLrC0.js";import{c as N}from"./index-i-FSWxrB.js";import"./index-mfm2cg16.js";import"./event-DkVV3hnh.js";import"./index-vDgv26t9.js";import"./use-form-item-8SqZ4FLx.js";const P={class:"son_btn fs14"},A={class:"song_list"},F={class:"df"},H={class:"music_mv"},J={style:{display:"flex","margin-left":"5px"}},K={style:{display:"flex","align-items":"center"}},O={key:0,class:"loading_btn"},Q=I(t({__name:"Song",props:{id:{}},setup(l){const s=l,{id:t}=o(d()),{playMusic:I,pushPlayList:R}=d(),$=u([]),q=c({order:"hot",limit:20,page:1,loading:!1,noMore:!1});r((async()=>{await L()}));const B=v((()=>1===q.page?0:$.value.length+q.limit)),L=async()=>{try{q.loading=!0;const{songs:a}=await m(s.id,q.order,q.limit,B.value);1===q.page?$.value=a:$.value.push(...a),a.length<q.limit&&(q.noMore=!0)}catch(a){q.page--}q.loading=!1},Q=()=>{q.page++,L()},T=()=>{R(!1,...$.value),I($.value[0].id)};return(l,s)=>{const o=e,d=i,u=n,c=a;return p(),f(z,null,[_("div",P,[g(o,{plain:"",round:"",icon:k(h),onClick:T},{default:b((()=>[y("播放全部")])),_:1},8,["icon"]),g(o,{plain:"",round:"",icon:k(j)},{default:b((()=>[y("下载")])),_:1},8,["icon"]),g(o,{plain:"",round:"",icon:k(x)},{default:b((()=>[y("批量操作")])),_:1},8,["icon"])]),g(u,{class:"fs14 mt20"},{default:b((()=>[g(d,{span:14},{default:b((()=>[y("歌曲")])),_:1}),g(d,{span:8},{default:b((()=>[y("专辑")])),_:1}),g(d,{span:2},{default:b((()=>[y("时长")])),_:1})])),_:1}),_("div",A,[(p(!0),f(z,null,C($.value,((a,l)=>(p(),M(u,{class:V(["h50 song_info",{playing:k(t)===a.id}]),key:l,onDblclick:l=>k(I)(a.id)},{default:b((()=>[g(d,{class:"music_song lh50",span:14},{default:b((()=>[_("div",F,[_("div",H,[_("div",null,S(a.name),1),_("div",J,[g(c,{class:"mv_hover",size:20,color:"#000",onClick:D((l=>{a.id}),["stop"])},{default:b((()=>[g(k(E))])),_:2},1032,["onClick"])])]),_("div",K,[g(c,{class:"icon",size:20,color:"#fff",onClick:D((l=>k(I)(a.id)),["stop"])},{default:b((()=>[g(k(h))])),_:2},1032,["onClick"])])])])),_:2},1024),g(d,{class:"collection lh50",span:8},{default:b((()=>[y(S(a.al.name),1)])),_:2},1024),g(d,{class:"duration lh50",span:2},{default:b((()=>[y(S(k(N)(a.dt/1e3)),1)])),_:2},1024)])),_:2},1032,["onDblclick","class"])))),128))]),$.value.length>0&&!q.noMore?(p(),f("div",O,[g(o,{type:"success",loading:q.loading,link:"",onClick:Q},{default:b((()=>[y("加载更多")])),_:1},8,["loading"])])):w("",!0)],64)}}}),[["__scopeId","data-v-7d5779f2"]]),T={key:0,class:"details_top"},U=["src"],Y={class:"details_right"},G={class:"details_name"},W={class:"details_info fs12"},X={class:"details_song fs12"},Z={style:{margin:"0 15px"}},aa={class:"details_btn"},la=I(t({__name:"index",setup(a){const i=R(),n=Number(i.query.id),t=u(),o=u(!1),d=u("song");return r((async()=>{t.value=await $(n),o.value=!0})),(a,i)=>{var u,c,r,v,m,h;const j=e,x=s,C=l;return p(),f(z,null,[o.value?(p(),f("div",T,[_("img",{src:null==(u=t.value)?void 0:u.artist.cover,alt:""},null,8,U),_("div",Y,[_("div",G,S(null==(c=t.value)?void 0:c.artist.name),1),_("div",W,S(null==(r=t.value)?void 0:r.artist.briefDesc.substring(0,90))+"...",1),_("div",X,[_("span",null,"单曲数："+S(null==(v=t.value)?void 0:v.artist.musicSize),1),_("span",Z,"专辑数："+S(null==(m=t.value)?void 0:m.artist.albumSize),1),_("span",null,"MV数："+S(null==(h=t.value)?void 0:h.artist.mvSize),1)]),_("div",aa,[g(j,{type:"success",icon:k(q),round:""},{default:b((()=>[y("关注")])),_:1},8,["icon"]),g(j,{icon:k(B),round:""},{default:b((()=>[y("歌手电台")])),_:1},8,["icon"]),g(j,{icon:k(L),circle:""},null,8,["icon"])])])])):w("",!0),o.value?(p(),M(C,{key:1,modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=a=>d.value=a),class:"demo-tabs"},{default:b((()=>{var a,l,s;return[g(x,{label:`歌曲 ${null==(a=t.value)?void 0:a.artist.musicSize}`,name:"song"},{default:b((()=>[g(Q,{id:k(n)},null,8,["id"])])),_:1},8,["label"]),g(x,{label:`专辑 ${null==(l=t.value)?void 0:l.artist.albumSize}`,name:"collection"},{default:b((()=>[y("Config")])),_:1},8,["label"]),g(x,{label:`视频 ${null==(s=t.value)?void 0:s.artist.musicSize}`,name:"M"},{default:b((()=>[y("Role")])),_:1},8,["label"]),g(x,{label:"详情",name:"songDetails"},{default:b((()=>[y("Task")])),_:1})]})),_:1},8,["modelValue"])):w("",!0)],64)}}}),[["__scopeId","data-v-13673dfc"]]);export{la as default};
