import{h as e,Y as l,a7 as a,r as t,a as s,f as i,c as r,y as u,Z as n,$ as c,o as v,s as o,z as d,_ as f}from"./index-hdHR_QWJ.js";const m={class:"lyricInfo"},y=["data-index"],p=f(e({__name:"index",setup(e){const{lyricData:f,playBlackTime:p}=l(a()),x=t([]),g=t(0);let _=!0;const h=t(null),b=t(0);let k=0,I=0;const N=t(null);let q;s((()=>{A(f.value.lrc.lyric),q=h.value.querySelectorAll("span"),I=N.value.offsetHeight/2}));const A=async e=>{let l=e.split(/\n/gi);l.length=l.length-1;let a=l.map((e=>{let l=e.indexOf("]"),a=e.slice(1,l).trim().split(":"),t=Number((60*Number(a[0])+Number(a[1])).toFixed(3)),s=e.slice(l+1).trim();return{time1:e.slice(1,l).trim(),time:t,msg:s}}));a.forEach(((e,l,a)=>{""===e.msg&&a.splice(l,1)})),x.value=a};return i((()=>p),((e,l)=>{(e=>{let l=x.value[g.value];if(_&&e.value>l.time){q=h.value.querySelectorAll("div");const e=parseInt(q[g.value].dataset.index);if(g.value===e){if(b.value=g.value,g.value+=1,g>=q.length)return void(_=!1);k+=q[g.value].offsetHeight,h.value&&(h.value.style.transform=`translateY(${I-k}px)`)}}})(e)}),{deep:!0}),(e,l)=>(v(),r("div",m,[u("div",{ref_key:"lyricDiv",ref:N,class:"lyrics"},[u("ul",{ref_key:"lyric",ref:h,style:{transition:".3s"}},[(v(!0),r(n,null,c(x.value,((e,l)=>(v(),r("div",{class:o(["text",{text_color:b.value===l}]),key:l,"data-index":l},d(e.msg),11,y)))),128))],512)],512)]))}}),[["__scopeId","data-v-5a5abecd"]]);export{p as default};
