import{E as a}from"./el-icon-_k5g-mge.js";import{v as s}from"./el-loading-4nq1qPVT.js";import{a as l,E as e}from"./el-tab-pane-9e66BgAB.js";import{E as t}from"./el-button-E2UmwNkR.js";import{k as n,r as i,c as o,F as d,L as u,C as c,ah as r,o as p,_ as v,a5 as m,J as _,E as f,A as g,aD as y,aE as x,aF as k,ad as h,m as b,W as j,D as L,K as C,z as E,y as I,af as D,ag as q,a9 as z,a as U,aG as V,aH as w,q as F}from"./index-N4H_bZBi.js";import{E as H,a as A}from"./el-col-Iz-NahOK.js";import{c as G}from"./index-J504GgKA.js";import"./index-cb5UPK4r.js";import"./event-DkVV3hnh.js";import"./index-6XEzas_6.js";import"./vnode-atnx2Zio.js";const J={class:"more_text"},K={key:0},M={key:1},N=v(n({__name:"index",props:{text:{},end:{}},setup(a){const s=a,l=i(!1),e=i(!1);return s.text&&s.text.length>s.end&&(l.value=!0),(a,s)=>(p(),o("div",J,[l.value?(p(),o(d,{key:0},[e.value?(p(),o("span",M,u(a.text)+"...",1)):(p(),o("span",K,u(a.text.substring(0,a.end))+"...",1)),c("span",{class:"ml_20",onClick:s[0]||(s[0]=a=>e.value=!e.value)},"["+u(e.value?"收起":"详情")+"]",1)],64)):(p(),o(d,{key:1},[r(u(a.text),1)],64))]))}}),[["__scopeId","data-v-4da36e7e"]]),R={class:"song_info_head"},S=["src"],W={class:"details_right"},$={class:"details_name"},B={class:"play_info_head"},O=["src"],P={class:"details_btn"},Q=v(n({__name:"playLIstHead",props:{playlist:{}},setup:a=>(a,s)=>{var l,e,n,i;const v=t;return p(),o("div",R,[c("img",{src:null==(l=a.playlist)?void 0:l.coverImgUrl,alt:""},null,8,S),c("div",W,[c("div",null,[c("div",$,u(null==(e=a.playlist)?void 0:e.name),1),c("div",B,[c("img",{src:null==(n=a.playlist)?void 0:n.creator.avatarUrl,alt:""},null,8,O),c("div",null,u(null==(i=a.playlist)?void 0:i.creator.nickname),1),(p(!0),o(d,null,m(a.playlist.tags,(a=>(p(),o("div",{class:"ml_20 color",key:a}," #"+u(a),1)))),128))]),_(N,{text:a.playlist.description,end:90},null,8,["text"])]),c("div",P,[_(v,{type:"success",icon:g(y),round:""},{default:f((()=>[r("播放全部")])),_:1},8,["icon"]),_(v,{icon:g(x),round:""},{default:f((()=>[r("收藏")])),_:1},8,["icon"]),_(v,{icon:g(k),circle:""},null,8,["icon"])])])])}}),[["__scopeId","data-v-07ae9607"]]),T={class:"song_list_box"},X={class:"song_list"},Y={class:"df"},Z={class:"music_mv"},aa=(a=>(D("data-v-4df0ad18"),a=a(),q(),a))((()=>c("div",{style:{display:"flex","margin-left":"5px"}},null,-1))),sa={style:{display:"flex","align-items":"center"}},la={key:0,class:"loading_btn"},ea=v(n({__name:"SongList",props:{songsList:{}},setup(s){const l=s,e=i(10),n=i(1),{playMusic:v}=h(),y=b((()=>n.value-l.songsList.length/e.value>=0)),x=()=>{n.value=n.value+1};return(s,l)=>{const i=H,k=A,h=j("CaretRight"),b=a,D=t;return p(),o("div",T,[_(k,{class:"fs14 mt20"},{default:f((()=>[_(i,{span:12},{default:f((()=>[r("歌曲")])),_:1}),_(i,{span:5},{default:f((()=>[r("歌手")])),_:1}),_(i,{span:5},{default:f((()=>[r("专辑")])),_:1}),_(i,{span:2},{default:f((()=>[r("时长")])),_:1})])),_:1}),c("div",X,[(p(!0),o(d,null,m(s.songsList.slice(0,e.value*n.value),((a,l)=>(p(),L(k,{class:E(["h50 song_info",{playing:s.id===a.id}]),key:l,onDblclick:s=>g(v)(a.id)},{default:f((()=>[_(i,{class:"music_song lh50",span:12},{default:f((()=>[c("div",Y,[c("div",Z,[c("div",null,u(a.name),1),aa]),c("div",sa,[_(b,{class:"icon",size:20,color:"#fff",onClick:C((s=>g(v)(a.id)),["stop"])},{default:f((()=>[_(h)])),_:2},1032,["onClick"])])])])),_:2},1024),_(i,{class:"collection lh50",span:5},{default:f((()=>[r(u(a.ar[0].name),1)])),_:2},1024),_(i,{class:"collection lh50",span:5},{default:f((()=>[r(u(a.al.name),1)])),_:2},1024),_(i,{class:"duration lh50",span:2},{default:f((()=>[r(u(g(G)(a.dt/1e3)),1)])),_:2},1024)])),_:2},1032,["onDblclick","class"])))),128))]),s.songsList.length>0&&e.value&&!y.value?(p(),o("div",la,[_(D,{type:"success",link:"",onClick:x},{default:f((()=>[r("加载更多")])),_:1})])):I("",!0)])}}}),[["__scopeId","data-v-4df0ad18"]]),ta={key:0},na=v(n({__name:"index",setup(a){const t=i("song"),n=i(),u=i([]),c=z(),r=i(!1);return U((()=>{r.value=!0,(async()=>{const a=Number(c.query.id);await V(a).then((a=>{n.value=a})),await w(a).then((a=>{u.value=a,r.value=!1}))})()})),(a,i)=>{const c=e,v=l,m=s;return p(),o(d,null,[n.value?(p(),o("div",ta,[_(Q,{playlist:n.value},null,8,["playlist"])])):I("",!0),n.value?(p(),L(v,{key:1,modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=a=>t.value=a),class:"demo-tabs"},{default:f((()=>[_(c,{label:`歌曲 ${u.value.length}`,name:"song"},{default:f((()=>[F(_(ea,{songsList:u.value},null,8,["songsList"]),[[m,r.value]])])),_:1},8,["label"]),_(c,{lazy:"",label:"评论",name:"comments"})])),_:1},8,["modelValue"])):I("",!0)],64)}}}),[["__scopeId","data-v-8af9c9b7"]]);export{na as default};
