import{o as a}from"./el-icon-Z3MxFt-s.js";import{E as l,a as s}from"./el-tab-pane-423FP4o3.js";import{E as e}from"./el-button-EHozqQB3.js";import{E as i,a as n}from"./el-col-RaDTCPZZ.js";import{l as t,ah as o,ai as d,r as u,R as c,f as r,d as v,aK as m,o as p,c as f,D as _,K as g,G as b,a8 as y,u as h,aL as k,aM as j,aN as x,F as z,aa as M,A as C,E as S,M as D,L as E,aO as V,B as w,_ as L,ae as R,aP as $,a7 as I,aQ as K,aR as N}from"./index-GsZzM1oS.js";import{c as P}from"./index-aUu7IP7u.js";import"./event-hiqsiK8x.js";import"./index-Ij9YtUuN.js";import"./index-dbX9Ir8N.js";import"./use-form-item-_PXyX6LQ.js";const q={class:"son_btn fs14"},A={class:"song_list"},B={class:"df"},F={class:"music_mv"},G={style:{display:"flex","margin-left":"5px"}},O={style:{display:"flex","align-items":"center"}},Q={key:0,class:"loading_btn"},T=L(t({__name:"Song",props:{id:{}},setup(l){const s=l,{id:t}=o(d()),{playMusic:L,pushPlayList:R}=d(),$=u([]),I=c({order:"hot",limit:20,page:1,loading:!1,noMore:!1});r((async()=>{await N()}));const K=v((()=>1===I.page?0:$.value.length+I.limit)),N=async()=>{try{I.loading=!0;const{songs:a}=await m(s.id,I.order,I.limit,K.value);1===I.page?$.value=a:$.value.push(...a),a.length<I.limit&&(I.noMore=!0)}catch(a){I.page--}I.loading=!1},T=()=>{I.page++,N()},U=()=>{R(!1,...$.value),L($.value[0].id)};return(l,s)=>{const o=e,d=i,u=n,c=a;return p(),f(z,null,[_("div",q,[g(o,{plain:"",round:"",icon:h(k),onClick:U},{default:b((()=>[y("播放全部")])),_:1},8,["icon"]),g(o,{plain:"",round:"",icon:h(j)},{default:b((()=>[y("下载")])),_:1},8,["icon"]),g(o,{plain:"",round:"",icon:h(x)},{default:b((()=>[y("批量操作")])),_:1},8,["icon"])]),g(u,{class:"fs14 mt20"},{default:b((()=>[g(d,{span:14},{default:b((()=>[y("歌曲")])),_:1}),g(d,{span:8},{default:b((()=>[y("专辑")])),_:1}),g(d,{span:2},{default:b((()=>[y("时长")])),_:1})])),_:1}),_("div",A,[(p(!0),f(z,null,M($.value,((a,l)=>(p(),S(u,{class:w(["h50 song_info",{playing:h(t)===a.id}]),key:l,onDblclick:l=>h(L)(a.id)},{default:b((()=>[g(d,{class:"music_song lh50",span:14},{default:b((()=>[_("div",B,[_("div",F,[_("div",null,D(a.name),1),_("div",G,[g(c,{class:"mv_hover",size:20,color:"#000",onClick:E((l=>{a.id}),["stop"])},{default:b((()=>[g(h(V))])),_:2},1032,["onClick"])])]),_("div",O,[g(c,{class:"icon",size:20,color:"#fff",onClick:E((l=>h(L)(a.id)),["stop"])},{default:b((()=>[g(h(k))])),_:2},1032,["onClick"])])])])),_:2},1024),g(d,{class:"collection lh50",span:8},{default:b((()=>[y(D(a.al.name),1)])),_:2},1024),g(d,{class:"duration lh50",span:2},{default:b((()=>[y(D(h(P)(a.dt/1e3)),1)])),_:2},1024)])),_:2},1032,["onDblclick","class"])))),128))]),$.value.length>0&&!I.noMore?(p(),f("div",Q,[g(o,{type:"success",loading:I.loading,link:"",onClick:T},{default:b((()=>[y("加载更多")])),_:1},8,["loading"])])):C("",!0)],64)}}}),[["__scopeId","data-v-7d5779f2"]]),U={key:0,class:"details_top"},H=["src"],J={class:"details_right"},W={class:"details_name"},X={class:"details_info fs12"},Y={class:"details_song fs12"},Z={style:{margin:"0 15px"}},aa={class:"details_btn"},la=L(t({__name:"index",setup(a){const i=R(),n=Number(i.query.id),t=u(),o=u(!1),d=u("song");return r((async()=>{t.value=await $(n),o.value=!0})),(a,i)=>{var u,c,r,v,m,k;const j=e,x=s,M=l;return p(),f(z,null,[o.value?(p(),f("div",U,[_("img",{src:null==(u=t.value)?void 0:u.artist.cover,alt:""},null,8,H),_("div",J,[_("div",W,D(null==(c=t.value)?void 0:c.artist.name),1),_("div",X,D(null==(r=t.value)?void 0:r.artist.briefDesc.substring(0,90))+"...",1),_("div",Y,[_("span",null,"单曲数："+D(null==(v=t.value)?void 0:v.artist.musicSize),1),_("span",Z,"专辑数："+D(null==(m=t.value)?void 0:m.artist.albumSize),1),_("span",null,"MV数："+D(null==(k=t.value)?void 0:k.artist.mvSize),1)]),_("div",aa,[g(j,{type:"success",icon:h(I),round:""},{default:b((()=>[y("关注")])),_:1},8,["icon"]),g(j,{icon:h(K),round:""},{default:b((()=>[y("歌手电台")])),_:1},8,["icon"]),g(j,{icon:h(N),circle:""},null,8,["icon"])])])])):C("",!0),o.value?(p(),S(M,{key:1,modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=a=>d.value=a),class:"demo-tabs"},{default:b((()=>{var a,l,s;return[g(x,{label:`歌曲 ${null==(a=t.value)?void 0:a.artist.musicSize}`,name:"song"},{default:b((()=>[g(T,{id:h(n)},null,8,["id"])])),_:1},8,["label"]),g(x,{label:`专辑 ${null==(l=t.value)?void 0:l.artist.albumSize}`,name:"collection"},{default:b((()=>[y("Config")])),_:1},8,["label"]),g(x,{label:`视频 ${null==(s=t.value)?void 0:s.artist.musicSize}`,name:"M"},{default:b((()=>[y("Role")])),_:1},8,["label"]),g(x,{label:"详情",name:"songDetails"},{default:b((()=>[y("Task")])),_:1})]})),_:1},8,["modelValue"])):C("",!0)],64)}}}),[["__scopeId","data-v-13673dfc"]]);export{la as default};
