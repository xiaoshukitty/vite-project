import{l as e,av as a,aw as t,ax as l,r as n,ay as s,s as i,d as o,w as c,t as r,f as u,o as d,E as v,K as f,G as m,u as p,B as g,O as y,L as w,D as b,A as k,a1 as h,F as x,ar as _,as as z,c as I,az as C,aA as S,H as O,aB as N,aC as D,z as E,y as L,aa as M,C as R,T,Y as A,m as B,M as Y,I as $,k as j,af as X,aD as F,_ as P,a2 as H,ak as W,al as G,aE as K,aF as V,aG as J,aH as q,aI as U,aJ as Z,a9 as Q}from"./index-WNficDyy.js";import{i as ee,j as ae,d as te,m as le,k as ne,u as se,o as ie,_ as oe,E as ce,l as re,w as ue,s as de,K as ve,J as fe}from"./el-icon-BujaOUWO.js";import{i as me,d as pe,b as ge,a as ye,u as we,c as be}from"./index-8XQ2nvcN.js";function ke(e,a,t){var l=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return me(t)&&(l="leading"in t?!!t.leading:l,n="trailing"in t?!!t.trailing:n),pe(e,a,{leading:l,maxWait:a,trailing:n})}const he=ae({urlList:{type:te(Array),default:()=>le([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),xe={close:()=>!0,switch:e=>ne(e),rotate:e=>ne(e)},_e=["src"],ze=e({name:"ElImageViewer"});const Ie=ue(oe(e({...ze,props:he,emits:xe,setup(e,{expose:B,emit:Y}){const $=e,j={CONTAIN:{name:"contain",icon:a(t)},ORIGINAL:{name:"original",icon:a(l)}},{t:X}=ge(),F=se("image-viewer"),{nextZIndex:P}=ye(),H=n(),W=n([]),G=s(),K=n(!0),V=n($.initialIndex),J=i(j.CONTAIN),q=n({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),U=o((()=>{const{urlList:e}=$;return e.length<=1})),Z=o((()=>0===V.value)),Q=o((()=>V.value===$.urlList.length-1)),ee=o((()=>$.urlList[V.value])),ae=o((()=>[F.e("btn"),F.e("prev"),F.is("disabled",!$.infinite&&Z.value)])),te=o((()=>[F.e("btn"),F.e("next"),F.is("disabled",!$.infinite&&Q.value)])),le=o((()=>{const{scale:e,deg:a,offsetX:t,offsetY:l,enableTransition:n}=q.value;let s=t/e,i=l/e;switch(a%360){case 90:case-270:[s,i]=[i,-s];break;case 180:case-180:[s,i]=[-s,-i];break;case 270:case-90:[s,i]=[-i,s]}const o={transform:`scale(${e}) rotate(${a}deg) translate(${s}px, ${i}px)`,transition:n?"transform .3s":""};return J.value.name===j.CONTAIN.name&&(o.maxWidth=o.maxHeight="100%"),o})),oe=o((()=>ne($.zIndex)?$.zIndex:P()));function ue(){G.stop(),Y("close")}function de(){K.value=!1}function ve(e){K.value=!1,e.target.alt=X("el.image.error")}function fe(e){if(K.value||0!==e.button||!H.value)return;q.value.enableTransition=!1;const{offsetX:a,offsetY:t}=q.value,l=e.pageX,n=e.pageY,s=ke((e=>{q.value={...q.value,offsetX:a+e.pageX-l,offsetY:t+e.pageY-n}})),i=re(document,"mousemove",s);re(document,"mouseup",(()=>{i()})),e.preventDefault()}function me(){q.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function pe(){if(K.value)return;const e=(a=j,Object.keys(a));var a;const t=Object.values(j),l=J.value.name,n=(t.findIndex((e=>e.name===l))+1)%e.length;J.value=j[e[n]],me()}function we(e){const a=$.urlList.length;V.value=(e+a)%a}function be(){Z.value&&!$.infinite||we(V.value-1)}function he(){Q.value&&!$.infinite||we(V.value+1)}function xe(e,a={}){if(K.value)return;const{minScale:t,maxScale:l}=$,{zoomRate:n,rotateDeg:s,enableTransition:i}={zoomRate:$.zoomRate,rotateDeg:90,enableTransition:!0,...a};switch(e){case"zoomOut":q.value.scale>t&&(q.value.scale=Number.parseFloat((q.value.scale/n).toFixed(3)));break;case"zoomIn":q.value.scale<l&&(q.value.scale=Number.parseFloat((q.value.scale*n).toFixed(3)));break;case"clockwise":q.value.deg+=s,Y("rotate",q.value.deg);break;case"anticlockwise":q.value.deg-=s,Y("rotate",q.value.deg)}q.value.enableTransition=i}return c(ee,(()=>{r((()=>{const e=W.value[0];(null==e?void 0:e.complete)||(K.value=!0)}))})),c(V,(e=>{me(),Y("switch",e)})),u((()=>{var e,a;!function(){const e=ke((e=>{switch(e.code){case ce.esc:$.closeOnPressEscape&&ue();break;case ce.space:pe();break;case ce.left:be();break;case ce.up:xe("zoomIn");break;case ce.right:he();break;case ce.down:xe("zoomOut")}})),a=ke((e=>{xe((e.deltaY||e.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:$.zoomRate,enableTransition:!1})}));G.run((()=>{re(document,"keydown",e),re(document,"wheel",a)}))}(),null==(a=null==(e=H.value)?void 0:e.focus)||a.call(e)})),B({setActiveItem:we}),(e,a)=>(d(),v(A,{to:"body",disabled:!e.teleported},[f(T,{name:"viewer-fade",appear:""},{default:m((()=>[b("div",{ref_key:"wrapper",ref:H,tabindex:-1,class:g(p(F).e("wrapper")),style:y({zIndex:p(oe)})},[b("div",{class:g(p(F).e("mask")),onClick:a[0]||(a[0]=w((a=>e.hideOnClickModal&&ue()),["self"]))},null,2),k(" CLOSE "),b("span",{class:g([p(F).e("btn"),p(F).e("close")]),onClick:ue},[f(p(ie),null,{default:m((()=>[f(p(h))])),_:1})],2),k(" ARROW "),p(U)?k("v-if",!0):(d(),I(x,{key:0},[b("span",{class:g(p(ae)),onClick:be},[f(p(ie),null,{default:m((()=>[f(p(_))])),_:1})],2),b("span",{class:g(p(te)),onClick:he},[f(p(ie),null,{default:m((()=>[f(p(z))])),_:1})],2)],64)),k(" ACTIONS "),b("div",{class:g([p(F).e("btn"),p(F).e("actions")])},[b("div",{class:g(p(F).e("actions__inner"))},[f(p(ie),{onClick:a[1]||(a[1]=e=>xe("zoomOut"))},{default:m((()=>[f(p(C))])),_:1}),f(p(ie),{onClick:a[2]||(a[2]=e=>xe("zoomIn"))},{default:m((()=>[f(p(S))])),_:1}),b("i",{class:g(p(F).e("actions__divider"))},null,2),f(p(ie),{onClick:pe},{default:m((()=>[(d(),v(O(p(J).icon)))])),_:1}),b("i",{class:g(p(F).e("actions__divider"))},null,2),f(p(ie),{onClick:a[3]||(a[3]=e=>xe("anticlockwise"))},{default:m((()=>[f(p(N))])),_:1}),f(p(ie),{onClick:a[4]||(a[4]=e=>xe("clockwise"))},{default:m((()=>[f(p(D))])),_:1})],2)],2),k(" CANVAS "),b("div",{class:g(p(F).e("canvas"))},[(d(!0),I(x,null,M(e.urlList,((e,a)=>L((d(),I("img",{ref_for:!0,ref:e=>W.value[a]=e,key:e,src:e,style:y(p(le)),class:g(p(F).e("img")),onLoad:de,onError:ve,onMousedown:fe},null,46,_e)),[[E,a===V.value]]))),128))],2),R(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}}),[["__file","image-viewer.vue"]])),Ce=ae({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:te([String,Object])},previewSrcList:{type:te(Array),default:()=>le([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),Se={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>ne(e),close:()=>!0,show:()=>!0},Oe=["src","loading"],Ne={key:0},De=e({name:"ElImage",inheritAttrs:!1});const Ee=ue(oe(e({...De,props:Ce,emits:Se,setup(e,{emit:a}){const t=e;let l="";const{t:s}=ge(),i=se("image"),f=B(),w=we(),h=n(),_=n(!1),z=n(!0),C=n(!1),S=n(),O=n(),N=ee&&"loading"in HTMLImageElement.prototype;let D,E;const L=o((()=>[i.e("inner"),A.value&&i.e("preview"),z.value&&i.is("loading")])),M=o((()=>f.style)),T=o((()=>{const{fit:e}=t;return ee&&e?{objectFit:e}:{}})),A=o((()=>{const{previewSrcList:e}=t;return Array.isArray(e)&&e.length>0})),X=o((()=>{const{previewSrcList:e,initialIndex:a}=t;let l=a;return a>e.length-1&&(l=0),l})),F=o((()=>"eager"!==t.loading&&(!N&&"lazy"===t.loading||t.lazy))),P=()=>{ee&&(z.value=!0,_.value=!1,h.value=t.src)};function H(e){z.value=!1,_.value=!1,a("load",e)}function W(e){z.value=!1,_.value=!0,a("error",e)}function G(){((e,a)=>{if(!ee||!e||!a)return!1;const t=e.getBoundingClientRect();let l;return l=a instanceof Element?a.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<l.bottom&&t.bottom>l.top&&t.right>l.left&&t.left<l.right})(S.value,O.value)&&(P(),J())}const K=ve(G,200,!0);async function V(){var e;if(!ee)return;await r();const{scrollContainer:a}=t;de(a)?O.value=a:j(a)&&""!==a?O.value=null!=(e=document.querySelector(a))?e:void 0:S.value&&(O.value=be(S.value)),O.value&&(D=re(O,"scroll",K),setTimeout((()=>G()),100))}function J(){ee&&O.value&&K&&(null==D||D(),O.value=void 0)}function q(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function U(){A.value&&(E=re("wheel",q,{passive:!1}),l=document.body.style.overflow,document.body.style.overflow="hidden",C.value=!0,a("show"))}function Z(){null==E||E(),document.body.style.overflow=l,C.value=!1,a("close")}function Q(e){a("switch",e)}return c((()=>t.src),(()=>{F.value?(z.value=!0,_.value=!1,J(),V()):P()})),u((()=>{F.value?V():P()})),(e,a)=>(d(),I("div",{ref_key:"container",ref:S,class:g([p(i).b(),e.$attrs.class]),style:y(p(M))},[_.value?R(e.$slots,"error",{key:0},(()=>[b("div",{class:g(p(i).e("error"))},Y(p(s)("el.image.error")),3)])):(d(),I(x,{key:1},[void 0!==h.value?(d(),I("img",$({key:0},p(w),{src:h.value,loading:e.loading,style:p(T),class:p(L),onClick:U,onLoad:H,onError:W}),null,16,Oe)):k("v-if",!0),z.value?(d(),I("div",{key:1,class:g(p(i).e("wrapper"))},[R(e.$slots,"placeholder",{},(()=>[b("div",{class:g(p(i).e("placeholder"))},null,2)]))],2)):k("v-if",!0)],64)),p(A)?(d(),I(x,{key:2},[C.value?(d(),v(p(Ie),{key:0,"z-index":e.zIndex,"initial-index":p(X),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:Z,onSwitch:Q},{default:m((()=>[e.$slots.viewer?(d(),I("div",Ne,[R(e.$slots,"viewer")])):k("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):k("v-if",!0)],64)):k("v-if",!0)],6))}}),[["__file","image.vue"]])),Le=X("BannerStore",(()=>{const e=n([]);return{banners:e,getBanners:async()=>{e.value.length||(e.value=await F())}}})),Me=P(e({__name:"index",props:{title:{}},setup:e=>(e,a)=>(d(),I("h2",null,Y(e.title),1))}),[["__scopeId","data-v-954d9e1f"]]),Re=(e=>(W("data-v-c0c3d04f"),e=e(),G(),e))((()=>b("div",{class:"mask"},null,-1))),Te=P(e({__name:"index",props:{imgSrc:{type:String,default:""}},setup(e){const a=["fill","contain","cover","none","scale-down"],t=()=>{},l=()=>{};return(n,s)=>{const i=Ee,o=H("CaretRight"),c=ie;return d(),I("div",{class:"playlist",onClick:l},[f(i,{class:"el_image",src:e.imgSrc,fit:a},null,8,["src"]),Re,f(c,{class:"icon",size:40,color:"#fff",onClick:w(t,["stop"])},{default:m((()=>[f(o)])),_:1})])}}}),[["__scopeId","data-v-c0c3d04f"]]),Ae=X("useMusicStore",(()=>{const e=n([]),a=n([]),t=n([]),l=n([]),s=n([]),i=n([]);return{exclusivePlaylistData:e,getExclusivePlaylistData:async()=>{if(e.value.length)return;let a=await K();e.value=fe(a,10)},recommendedMusicData:a,getRecommendedMusicData:async()=>{a.value.length||(a.value=await V())},recommendedMvData:t,getRecommendedMvData:async()=>{t.value.length||(t.value=await J())},exclusiveMusicData:l,getExclusiveMusicData:async()=>{l.value.length||(l.value=await q(4))},recommendationStationData:s,getRecommendationStationData:async()=>{l.value.length||(s.value=await U())},officialListData:i,getOfficialListData:async()=>{i.value.length||(i.value=await Z())}}})),Be={class:"mv"},Ye={class:"mv_list"},$e=P(e({__name:"index",setup(e){const{recommendedMvData:a}=Q(Ae()),{getRecommendedMvData:t}=Ae();return u((async()=>{await t()})),(e,t)=>(d(),I("div",Be,[f(Me,{title:"推荐MV"}),b("div",Ye,[(d(!0),I(x,null,M(p(a),(e=>(d(),I("div",{class:"mv_item",key:e.id},[f(Te,{imgSrc:e.picUrl},null,8,["imgSrc"]),b("div",null,Y(e.name),1),b("div",null,Y(e.artistName),1)])))),128))])]))}}),[["__scopeId","data-v-916f6e29"]]);export{$e as M,Te as P,Me as _,Ae as a,ke as t,Le as u};
