import{D as a,o as l}from"./el-icon-TdbfcGnA.js";import{E as s,a as e}from"./el-tab-pane-1qr3iu7_.js";import{E as i,a as n,b as t}from"./el-col-CKooeGaj.js";import{l as o,ah as d,ai as u,r as c,R as r,f as v,d as m,aK as p,o as f,c as _,D as g,K as b,G as y,a8 as h,u as k,aL as x,aM as j,aN as z,F as M,aa as C,A as S,E as D,M as V,L as w,aO as E,B as L,_ as R,ae as $,aP as I,a7 as K,aQ as N,aR as P}from"./index-hwwiOv53.js";import"./index-Wlw2hyad.js";import"./index-rbGaf3qG.js";import"./use-form-item-U2th8Ig_.js";const q={class:"son_btn fs14"},A={class:"song_list"},B={class:"df"},F={class:"music_mv"},G={style:{display:"flex","margin-left":"5px"}},O={style:{display:"flex","align-items":"center"}},Q={key:0,class:"loading_btn"},T=R(o({__name:"Song",props:{id:{}},setup(s){const e=s,{id:o}=d(u()),{playMusic:R,pushPlayList:$}=u(),I=c([]),K=r({order:"hot",limit:20,page:1,loading:!1,noMore:!1});v((async()=>{await P()}));const N=m((()=>1===K.page?0:I.value.length+K.limit)),P=async()=>{try{K.loading=!0;const{songs:a}=await p(e.id,K.order,K.limit,N.value);1===K.page?I.value=a:I.value.push(...a),a.length<K.limit&&(K.noMore=!0)}catch(a){K.page--}K.loading=!1},T=()=>{K.page++,P()},U=()=>{$(!1,...I.value),R(I.value[0].id)};return(s,e)=>{const d=i,u=n,c=t,r=l;return f(),_(M,null,[g("div",q,[b(d,{plain:"",round:"",icon:k(x),onClick:U},{default:y((()=>[h("播放全部")])),_:1},8,["icon"]),b(d,{plain:"",round:"",icon:k(j)},{default:y((()=>[h("下载")])),_:1},8,["icon"]),b(d,{plain:"",round:"",icon:k(z)},{default:y((()=>[h("批量操作")])),_:1},8,["icon"])]),b(c,{class:"fs14 mt20"},{default:y((()=>[b(u,{span:14},{default:y((()=>[h("歌曲")])),_:1}),b(u,{span:8},{default:y((()=>[h("专辑")])),_:1}),b(u,{span:2},{default:y((()=>[h("时长")])),_:1})])),_:1}),g("div",A,[(f(!0),_(M,null,C(I.value,((l,s)=>(f(),D(c,{class:L(["h50 song_info",{playing:k(o)===l.id}]),key:s,onDblclick:a=>k(R)(l.id)},{default:y((()=>[b(u,{class:"music_song lh50",span:14},{default:y((()=>[g("div",B,[g("div",F,[g("div",null,V(l.name),1),g("div",G,[b(r,{class:"mv_hover",size:20,color:"#000",onClick:w((a=>{l.id}),["stop"])},{default:y((()=>[b(k(E))])),_:2},1032,["onClick"])])]),g("div",O,[b(r,{class:"icon",size:20,color:"#fff",onClick:w((a=>k(R)(l.id)),["stop"])},{default:y((()=>[b(k(x))])),_:2},1032,["onClick"])])])])),_:2},1024),b(u,{class:"collection lh50",span:8},{default:y((()=>[h(V(l.al.name),1)])),_:2},1024),b(u,{class:"duration lh50",span:2},{default:y((()=>[h(V(k(a)(l.dt/1e3)),1)])),_:2},1024)])),_:2},1032,["onDblclick","class"])))),128))]),I.value.length>0&&!K.noMore?(f(),_("div",Q,[b(d,{type:"success",loading:K.loading,link:"",onClick:T},{default:y((()=>[h("加载更多")])),_:1},8,["loading"])])):S("",!0)],64)}}}),[["__scopeId","data-v-7d5779f2"]]),U={key:0,class:"details_top"},H=["src"],J={class:"details_right"},W={class:"details_name"},X={class:"details_info fs12"},Y={class:"details_song fs12"},Z={style:{margin:"0 15px"}},aa={class:"details_btn"},la=R(o({__name:"index",setup(a){const l=$(),n=Number(l.query.id),t=c(),o=c(!1),d=c("song");return v((async()=>{t.value=await I(n),o.value=!0})),(a,l)=>{var u,c,r,v,m,p;const x=i,j=e,z=s;return f(),_(M,null,[o.value?(f(),_("div",U,[g("img",{src:null==(u=t.value)?void 0:u.artist.cover,alt:""},null,8,H),g("div",J,[g("div",W,V(null==(c=t.value)?void 0:c.artist.name),1),g("div",X,V(null==(r=t.value)?void 0:r.artist.briefDesc.substring(0,90))+"...",1),g("div",Y,[g("span",null,"单曲数："+V(null==(v=t.value)?void 0:v.artist.musicSize),1),g("span",Z,"专辑数："+V(null==(m=t.value)?void 0:m.artist.albumSize),1),g("span",null,"MV数："+V(null==(p=t.value)?void 0:p.artist.mvSize),1)]),g("div",aa,[b(x,{type:"success",icon:k(K),round:""},{default:y((()=>[h("关注")])),_:1},8,["icon"]),b(x,{icon:k(N),round:""},{default:y((()=>[h("歌手电台")])),_:1},8,["icon"]),b(x,{icon:k(P),circle:""},null,8,["icon"])])])])):S("",!0),o.value?(f(),D(z,{key:1,modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=a=>d.value=a),class:"demo-tabs"},{default:y((()=>{var a,l,s;return[b(j,{label:`歌曲 ${null==(a=t.value)?void 0:a.artist.musicSize}`,name:"song"},{default:y((()=>[b(T,{id:k(n)},null,8,["id"])])),_:1},8,["label"]),b(j,{label:`专辑 ${null==(l=t.value)?void 0:l.artist.albumSize}`,name:"collection"},{default:y((()=>[h("Config")])),_:1},8,["label"]),b(j,{label:`视频 ${null==(s=t.value)?void 0:s.artist.musicSize}`,name:"M"},{default:y((()=>[h("Role")])),_:1},8,["label"]),b(j,{label:"详情",name:"songDetails"},{default:y((()=>[h("Task")])),_:1})]})),_:1},8,["modelValue"])):S("",!0)],64)}}}),[["__scopeId","data-v-13673dfc"]]);export{la as default};
